//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: pdfreporter-core/src/org/oss/pdfreporter/crosstabs/fill/calculation/BucketDefinition.java
//
//  Created by kendra on 9/27/13.
//

#include "IOSClass.h"
#include "java/lang/ClassCastException.h"
#include "java/lang/Comparable.h"
#include "java/util/Comparator.h"
#include "org/oss/pdfreporter/crosstabs/fill/calculation/ArbitraryRankComparator.h"
#include "org/oss/pdfreporter/crosstabs/fill/calculation/BucketDefinition.h"
#include "org/oss/pdfreporter/crosstabs/type/CrosstabTotalPositionEnum.h"
#include "org/oss/pdfreporter/engine/JRException.h"
#include "org/oss/pdfreporter/engine/JRExpression.h"
#include "org/oss/pdfreporter/engine/type/SortOrderEnum.h"
#include "org/oss/pdfreporter/uses/org/apache/commons/collections/comparators/ComparableComparator.h"
#include "org/oss/pdfreporter/uses/org/apache/commons/collections/comparators/ReverseComparator.h"

@implementation OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition

@synthesize VALUE_TOTAL = VALUE_TOTAL_;
@synthesize VALUE_NULL = VALUE_NULL_;
@synthesize bucketValueComparator = bucketValueComparator_;
@synthesize orderByExpression = orderByExpression_;
@synthesize orderValueComparator = orderValueComparator_;
@synthesize totalPosition = totalPosition_;
@synthesize computeTotal_ = computeTotal__;

+ (char)VALUE_TYPE_VALUE {
  return OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_VALUE;
}

+ (char)VALUE_TYPE_NULL {
  return OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_NULL;
}

+ (char)VALUE_TYPE_TOTAL {
  return OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_TOTAL;
}

- (id)initWithIOSClass:(IOSClass *)valueClass
withOrgOssPdfreporterEngineJRExpression:(id<OrgOssPdfreporterEngineJRExpression>)orderByExpression
withJavaUtilComparator:(id<JavaUtilComparator>)comparator
withOrgOssPdfreporterEngineTypeSortOrderEnumEnum:(OrgOssPdfreporterEngineTypeSortOrderEnumEnum *)order
withOrgOssPdfreporterCrosstabsTypeCrosstabTotalPositionEnumEnum:(OrgOssPdfreporterCrosstabsTypeCrosstabTotalPositionEnumEnum *)totalPosition {
  if ((self = [super init])) {
    VALUE_TOTAL_ = [[OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket alloc] initWithOrgOssPdfreporterCrosstabsFillCalculationBucketDefinition:self withChar:OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_TOTAL];
    VALUE_NULL_ = [[OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket alloc] initWithOrgOssPdfreporterCrosstabsFillCalculationBucketDefinition:self withChar:OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_NULL];
    if (comparator == nil && orderByExpression == nil && ![[IOSClass classWithProtocol:@protocol(JavaLangComparable)] isAssignableFrom:valueClass]) {
      @throw [[OrgOssPdfreporterEngineJRException alloc] initWithNSString:@"The bucket expression values are not comparable and no comparator specified."];
    }
    self.orderByExpression = orderByExpression;
    if (orderByExpression == nil) {
      self.bucketValueComparator = [OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition createOrderComparatorWithJavaUtilComparator:comparator withOrgOssPdfreporterEngineTypeSortOrderEnumEnum:order];
      self.orderValueComparator = nil;
    }
    else {
      if ([[IOSClass classWithProtocol:@protocol(JavaLangComparable)] isAssignableFrom:valueClass]) {
        self.bucketValueComparator = [OrgOssPdfreporterUsesOrgApacheCommonsCollectionsComparatorsComparableComparator getInstance];
      }
      else {
        self.bucketValueComparator = [[OrgOssPdfreporterCrosstabsFillCalculationArbitraryRankComparator alloc] init];
      }
      self.orderValueComparator = [OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition createOrderComparatorWithJavaUtilComparator:comparator withOrgOssPdfreporterEngineTypeSortOrderEnumEnum:order];
    }
    self.totalPosition = totalPosition;
    computeTotal__ = totalPosition != [OrgOssPdfreporterCrosstabsTypeCrosstabTotalPositionEnumEnum NONE];
  }
  return self;
}

+ (id<JavaUtilComparator>)createOrderComparatorWithJavaUtilComparator:(id<JavaUtilComparator>)comparator
                     withOrgOssPdfreporterEngineTypeSortOrderEnumEnum:(OrgOssPdfreporterEngineTypeSortOrderEnumEnum *)order {
  id<JavaUtilComparator> orderComparator;
  switch ([order ordinal]) {
    case OrgOssPdfreporterEngineTypeSortOrderEnum_DESCENDING:
    {
      if (comparator == nil) {
        orderComparator = [[OrgOssPdfreporterUsesOrgApacheCommonsCollectionsComparatorsReverseComparator alloc] init];
      }
      else {
        orderComparator = [[OrgOssPdfreporterUsesOrgApacheCommonsCollectionsComparatorsReverseComparator alloc] initWithJavaUtilComparator:comparator];
      }
      break;
    }
    case OrgOssPdfreporterEngineTypeSortOrderEnum_ASCENDING:
    default:
    {
      if (comparator == nil) {
        orderComparator = [OrgOssPdfreporterUsesOrgApacheCommonsCollectionsComparatorsComparableComparator getInstance];
      }
      else {
        orderComparator = comparator;
      }
      break;
    }
  }
  return orderComparator;
}

- (BOOL)computeTotal {
  return computeTotal__;
}

- (void)setComputeTotal {
  computeTotal__ = YES;
}

- (OrgOssPdfreporterCrosstabsTypeCrosstabTotalPositionEnumEnum *)getTotalPosition {
  return totalPosition_;
}

- (id<OrgOssPdfreporterEngineJRExpression>)getOrderByExpression {
  return orderByExpression_;
}

- (BOOL)hasOrderValues {
  return orderByExpression_ != nil;
}

- (int)compareOrderValuesWithId:(id)v1
                         withId:(id)v2 {
  return [((id<JavaUtilComparator>) nil_chk(orderValueComparator_)) compareWithId:v1 withId:v2];
}

- (OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *)createWithId:(id)value {
  if (value == nil) {
    return VALUE_NULL_;
  }
  return [[OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket alloc] initWithOrgOssPdfreporterCrosstabsFillCalculationBucketDefinition:self withId:value];
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition *typedCopy = (OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition *) copy;
  typedCopy.VALUE_TOTAL = VALUE_TOTAL_;
  typedCopy.VALUE_NULL = VALUE_NULL_;
  typedCopy.bucketValueComparator = bucketValueComparator_;
  typedCopy.orderByExpression = orderByExpression_;
  typedCopy.orderValueComparator = orderValueComparator_;
  typedCopy.totalPosition = totalPosition_;
  typedCopy.computeTotal_ = computeTotal__;
}

@end
@implementation OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket

@synthesize this$0 = this$0_;
@synthesize value = value_;
@synthesize type = type_;

- (id)initWithOrgOssPdfreporterCrosstabsFillCalculationBucketDefinition:(OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition *)outer$
                                                               withChar:(char)type {
  if ((self = [super init])) {
    this$0_ = outer$;
    self.value = nil;
    self.type = type;
  }
  return self;
}

- (id)initWithOrgOssPdfreporterCrosstabsFillCalculationBucketDefinition:(OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition *)outer$
                                                                 withId:(id)value {
  if ((self = [super init])) {
    this$0_ = outer$;
    self.value = value;
    self.type = OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_VALUE;
  }
  return self;
}

- (id)initWithOrgOssPdfreporterCrosstabsFillCalculationBucketDefinition:(OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition *)outer$
                                                                 withId:(id)value
                                                               withChar:(char)type {
  if ((self = [super init])) {
    this$0_ = outer$;
    self.value = value;
    self.type = type;
  }
  return self;
}

- (id)getValue {
  return value_;
}

- (BOOL)isEqual:(id)o {
  if (o == nil || !([o isKindOfClass:[OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket class]])) {
    return NO;
  }
  if (o == self) {
    return YES;
  }
  OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *v = (OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *) o;
  if (type_ != OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_VALUE) {
    return type_ == ((OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *) nil_chk(v)).type;
  }
  return ((OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *) nil_chk(v)).type == OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_VALUE && [nil_chk(value_) isEqual:((OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *) nil_chk(v)).value];
}

- (NSUInteger)hash {
  int hash_ = type_;
  if (type_ == OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_VALUE) {
    hash_ = 37 * hash_ + [nil_chk(value_) hash];
  }
  return hash_;
}

- (NSString *)description {
  switch (type_) {
    case OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_NULL:
    return @"NULL";
    case OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_TOTAL:
    return @"TOTAL";
    case OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_VALUE:
    default:
    return [NSString valueOf:value_];
  }
}

- (int)compareToWithId:(id)o {
  if (o != nil && ![o isKindOfClass:[NSObject class]]) {
    @throw [[JavaLangClassCastException alloc] init];
  }
  OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *val = (OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *) o;
  if (type_ != ((OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *) nil_chk(val)).type) {
    return type_ - ((OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *) nil_chk(val)).type;
  }
  if (type_ != OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_VALUE) {
    return 0;
  }
  return [((id<JavaUtilComparator>) nil_chk(this$0_.bucketValueComparator)) compareWithId:value_ withId:((OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *) nil_chk(val)).value];
}

- (BOOL)isTotal {
  return type_ == OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_VALUE_TYPE_TOTAL;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *typedCopy = (OrgOssPdfreporterCrosstabsFillCalculationBucketDefinition_Bucket *) copy;
  typedCopy.this$0 = this$0_;
  typedCopy.value = value_;
  typedCopy.type = type_;
}

@end
