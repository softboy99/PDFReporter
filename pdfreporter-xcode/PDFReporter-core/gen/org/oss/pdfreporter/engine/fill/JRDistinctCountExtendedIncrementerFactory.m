//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: pdfreporter-core/src/org/oss/pdfreporter/engine/fill/JRDistinctCountExtendedIncrementerFactory.java
//
//  Created by kendra on 9/27/13.
//

#include "IOSClass.h"
#include "java/util/HashSet.h"
#include "java/util/Set.h"
#include "org/oss/pdfreporter/engine/fill/AbstractValueProvider.h"
#include "org/oss/pdfreporter/engine/fill/DistinctCountHolder.h"
#include "org/oss/pdfreporter/engine/fill/JRCalculable.h"
#include "org/oss/pdfreporter/engine/fill/JRDistinctCountExtendedIncrementerFactory.h"
#include "org/oss/pdfreporter/engine/fill/JRExtendedIncrementer.h"
#include "org/oss/pdfreporter/engine/fill/JRExtendedIncrementerFactory.h"
#include "org/oss/pdfreporter/engine/type/CalculationEnum.h"

@implementation OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory

static OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory * OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory_mainInstance_;

+ (OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory *)mainInstance {
  return OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory_mainInstance_;
}

+ (void)setMainInstance:(OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory *)mainInstance {
  OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory_mainInstance_ = mainInstance;
}

- (id)init {
  return [super init];
}

+ (OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory *)getInstance {
  return OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory_mainInstance_;
}

- (id<OrgOssPdfreporterEngineFillJRExtendedIncrementer>)getExtendedIncrementerWithOrgOssPdfreporterEngineTypeCalculationEnumEnum:(OrgOssPdfreporterEngineTypeCalculationEnumEnum *)calculation {
  return [[OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory_JRDistinctCountExtendedIncrementer alloc] init];
}

+ (id<OrgOssPdfreporterEngineFillJRExtendedIncrementerFactory>)getFactoryWithIOSClass:(IOSClass *)valueClass {
  return [OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory getInstance];
}

+ (void)initialize {
  if (self == [OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory class]) {
    OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory_mainInstance_ = [[OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory alloc] init];
  }
}

@end
@implementation OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory_JRDistinctCountExtendedIncrementer

@synthesize lastHolder = lastHolder_;

- (id)init {
  if ((self = [super init])) {
    lastHolder_ = [[OrgOssPdfreporterEngineFillDistinctCountHolder alloc] init];
  }
  return self;
}

- (id)incrementWithOrgOssPdfreporterEngineFillJRCalculable:(id<OrgOssPdfreporterEngineFillJRCalculable>)variable
                                                    withId:(id)expressionValue
      withOrgOssPdfreporterEngineFillAbstractValueProvider:(OrgOssPdfreporterEngineFillAbstractValueProvider *)valueProvider {
  OrgOssPdfreporterEngineFillDistinctCountHolder *holder = (OrgOssPdfreporterEngineFillDistinctCountHolder *) [((id<OrgOssPdfreporterEngineFillJRCalculable>) nil_chk(variable)) getIncrementedValue];
  if (holder == nil) {
    holder = lastHolder_;
  }
  else {
    lastHolder_ = holder;
  }
  [((OrgOssPdfreporterEngineFillDistinctCountHolder *) nil_chk(holder)) addLastValue];
  return [[OrgOssPdfreporterEngineFillDistinctCountHolder alloc] initWithOrgOssPdfreporterEngineFillDistinctCountHolder:holder withId:expressionValue];
}

- (id)combineWithOrgOssPdfreporterEngineFillJRCalculable:(id<OrgOssPdfreporterEngineFillJRCalculable>)calculable1
             withOrgOssPdfreporterEngineFillJRCalculable:(id<OrgOssPdfreporterEngineFillJRCalculable>)calculable2
    withOrgOssPdfreporterEngineFillAbstractValueProvider:(OrgOssPdfreporterEngineFillAbstractValueProvider *)valueProvider {
  id<JavaUtilSet> distinctValues = [[JavaUtilHashSet alloc] init];
  OrgOssPdfreporterEngineFillDistinctCountHolder *holder1 = (OrgOssPdfreporterEngineFillDistinctCountHolder *) [((id<OrgOssPdfreporterEngineFillJRCalculable>) nil_chk(calculable1)) getValue];
  if (holder1 != nil) {
    [((id<JavaUtilSet>) nil_chk(distinctValues)) addAllWithJavaUtilCollection:[holder1 getDistinctValues]];
    if ([((OrgOssPdfreporterEngineFillDistinctCountHolder *) nil_chk(holder1)) getLastValue] != nil) {
      [((id<JavaUtilSet>) nil_chk(distinctValues)) addWithId:[((OrgOssPdfreporterEngineFillDistinctCountHolder *) nil_chk(holder1)) getLastValue]];
    }
  }
  OrgOssPdfreporterEngineFillDistinctCountHolder *holder2 = (OrgOssPdfreporterEngineFillDistinctCountHolder *) [((id<OrgOssPdfreporterEngineFillJRCalculable>) nil_chk(calculable2)) getValue];
  if (holder2 != nil) {
    [((id<JavaUtilSet>) nil_chk(distinctValues)) addAllWithJavaUtilCollection:[holder2 getDistinctValues]];
    if ([((OrgOssPdfreporterEngineFillDistinctCountHolder *) nil_chk(holder2)) getLastValue] != nil) {
      [((id<JavaUtilSet>) nil_chk(distinctValues)) addWithId:[((OrgOssPdfreporterEngineFillDistinctCountHolder *) nil_chk(holder2)) getLastValue]];
    }
  }
  return [[OrgOssPdfreporterEngineFillDistinctCountHolder alloc] initWithJavaUtilSet:distinctValues];
}

- (id)initialValue OBJC_METHOD_FAMILY_NONE {
  return nil;
}

- (void)copyAllPropertiesTo:(id)copy {
  [super copyAllPropertiesTo:copy];
  OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory_JRDistinctCountExtendedIncrementer *typedCopy = (OrgOssPdfreporterEngineFillJRDistinctCountExtendedIncrementerFactory_JRDistinctCountExtendedIncrementer *) copy;
  typedCopy.lastHolder = lastHolder_;
}

@end
