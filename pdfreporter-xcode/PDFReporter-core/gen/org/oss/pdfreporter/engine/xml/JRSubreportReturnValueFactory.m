//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: pdfreporter-core/src/org/oss/pdfreporter/engine/xml/JRSubreportReturnValueFactory.java
//
//  Created by kendra on 9/27/13.
//

#include "java/util/Map.h"
#include "org/oss/pdfreporter/engine/JRVariable.h"
#include "org/oss/pdfreporter/engine/design/JRDesignSubreportReturnValue.h"
#include "org/oss/pdfreporter/engine/design/JRValidationException.h"
#include "org/oss/pdfreporter/engine/design/JasperDesign.h"
#include "org/oss/pdfreporter/engine/type/CalculationEnum.h"
#include "org/oss/pdfreporter/engine/xml/JRSubreportReturnValueFactory.h"
#include "org/oss/pdfreporter/engine/xml/JRXmlConstants.h"
#include "org/oss/pdfreporter/engine/xml/JRXmlLoader.h"
#include "org/oss/pdfreporter/uses/org/apache/digester/IDigester.h"
#include "org/oss/pdfreporter/xml/parsers/IAttributes.h"

@implementation OrgOssPdfreporterEngineXmlJRSubreportReturnValueFactory

- (id)createObjectWithOrgOssPdfreporterXmlParsersIAttributes:(id<OrgOssPdfreporterXmlParsersIAttributes>)atts {
  OrgOssPdfreporterEngineXmlJRXmlLoader *xmlLoader = (OrgOssPdfreporterEngineXmlJRXmlLoader *) [((id<OrgOssPdfreporterUsesOrgApacheDigesterIDigester>) nil_chk(digester_)) peekWithInt:[((id<OrgOssPdfreporterUsesOrgApacheDigesterIDigester>) nil_chk(digester_)) getCount] - 1];
  OrgOssPdfreporterEngineDesignJasperDesign *design = (OrgOssPdfreporterEngineDesignJasperDesign *) [((id<OrgOssPdfreporterUsesOrgApacheDigesterIDigester>) nil_chk(digester_)) peekWithInt:[((id<OrgOssPdfreporterUsesOrgApacheDigesterIDigester>) nil_chk(digester_)) getCount] - 2];
  OrgOssPdfreporterEngineDesignJRDesignSubreportReturnValue *returnValue = [[OrgOssPdfreporterEngineDesignJRDesignSubreportReturnValue alloc] init];
  NSString *variableName = [((id<OrgOssPdfreporterXmlParsersIAttributes>) nil_chk(atts)) getValueWithNSString:[OrgOssPdfreporterEngineXmlJRXmlConstants ATTRIBUTE_toVariable]];
  id<OrgOssPdfreporterEngineJRVariable> variable = [((id<JavaUtilMap>) nil_chk([((OrgOssPdfreporterEngineDesignJasperDesign *) nil_chk(design)) getVariablesMap])) getWithId:variableName];
  if (variable == nil) {
    [((OrgOssPdfreporterEngineXmlJRXmlLoader *) nil_chk(xmlLoader)) addErrorWithJavaLangException:[[OrgOssPdfreporterEngineDesignJRValidationException alloc] initWithNSString:[NSString stringWithFormat:@"Unknown variable %@", variableName] withId:returnValue]];
  }
  [((OrgOssPdfreporterEngineDesignJRDesignSubreportReturnValue *) nil_chk(returnValue)) setSubreportVariableWithNSString:[((id<OrgOssPdfreporterXmlParsersIAttributes>) nil_chk(atts)) getValueWithNSString:[OrgOssPdfreporterEngineXmlJRXmlConstants ATTRIBUTE_subreportVariable]]];
  [((OrgOssPdfreporterEngineDesignJRDesignSubreportReturnValue *) nil_chk(returnValue)) setToVariableWithNSString:variableName];
  OrgOssPdfreporterEngineTypeCalculationEnumEnum *calculation = [OrgOssPdfreporterEngineTypeCalculationEnumEnum getByNameWithNSString:[((id<OrgOssPdfreporterXmlParsersIAttributes>) nil_chk(atts)) getValueWithNSString:[OrgOssPdfreporterEngineXmlJRXmlConstants ATTRIBUTE_calculation]]];
  if (calculation != nil) {
    [((OrgOssPdfreporterEngineDesignJRDesignSubreportReturnValue *) nil_chk(returnValue)) setCalculationWithOrgOssPdfreporterEngineTypeCalculationEnumEnum:calculation];
  }
  NSString *incrementerFactoryClass = [((id<OrgOssPdfreporterXmlParsersIAttributes>) nil_chk(atts)) getValueWithNSString:[OrgOssPdfreporterEngineXmlJRXmlConstants ATTRIBUTE_incrementerFactoryClass]];
  if (incrementerFactoryClass != nil) {
    [((OrgOssPdfreporterEngineDesignJRDesignSubreportReturnValue *) nil_chk(returnValue)) setIncrementerFactoryClassNameWithNSString:incrementerFactoryClass];
  }
  return returnValue;
}

- (id)init {
  return [super init];
}

@end
