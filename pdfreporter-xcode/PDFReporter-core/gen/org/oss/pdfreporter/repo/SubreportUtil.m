//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: pdfreporter-core/src/org/oss/pdfreporter/repo/SubreportUtil.java
//
//  Created by kendra on 9/27/13.
//

#include "java/io/Closeable.h"
#include "java/io/IOException.h"
#include "java/io/InputStream.h"
#include "org/oss/pdfreporter/engine/JRException.h"
#include "org/oss/pdfreporter/engine/JasperCompileManager.h"
#include "org/oss/pdfreporter/engine/JasperReport.h"
#include "org/oss/pdfreporter/engine/design/JasperDesign.h"
#include "org/oss/pdfreporter/engine/xml/JRXmlLoader.h"
#include "org/oss/pdfreporter/repo/DigireportFileResourceLoader.h"
#include "org/oss/pdfreporter/repo/SubreportUtil.h"

@implementation OrgOssPdfreporterRepoSubreportUtil

+ (OrgOssPdfreporterEngineJasperReport *)loadSubreportWithNSString:(NSString *)location {
  JavaIoInputStream *isReport = nil;
  @try {
    isReport = [OrgOssPdfreporterRepoDigireportFileResourceLoader getInputStreamWithNSString:[((NSString *) nil_chk(location)) replace:@".jasper" withSequence:@".jrxml"]];
    if (isReport == nil) {
      @throw [[OrgOssPdfreporterEngineJRException alloc] initWithNSString:[NSString stringWithFormat:@"Subreport file not found: %@", location]];
    }
    OrgOssPdfreporterEngineDesignJasperDesign *design = [OrgOssPdfreporterEngineXmlJRXmlLoader load__WithJavaIoInputStream:isReport];
    return [OrgOssPdfreporterEngineJasperCompileManager compileReportWithOrgOssPdfreporterEngineDesignJasperDesign:design];
  }
  @finally {
    [OrgOssPdfreporterRepoSubreportUtil closeWithJavaIoCloseable:isReport];
  }
}

+ (void)closeWithJavaIoCloseable:(id<JavaIoCloseable>)stream {
  if (stream != nil) {
    @try {
      [stream close];
    }
    @catch (JavaIoIOException *e) {
      @throw [[OrgOssPdfreporterEngineJRException alloc] initWithJavaLangThrowable:e];
    }
  }
}

- (id)init {
  return [super init];
}

@end
